@tailwind base;
@tailwind components;
@tailwind utilities;

:root { color-scheme: light dark; }
html, body, #root { height: 100%; }
html { scroll-behavior: smooth; }
body { @apply antialiased; font-family: Poppins, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji"; }
.prose h1, .prose h2, .prose h3, .prose h4 { font-family: "Playfair Display", ui-serif, Georgia, Cambria, "Times New Roman", Times, serif; }
.container { @apply mx-auto px-4 sm:px-6 lg:px-8; }
.btn { @apply inline-flex items-center justify-center rounded-md px-4 py-2 text-sm font-medium bg-ahc-green text-black hover:brightness-95 transition; }
.card { @apply rounded-xl border border-slate-200 bg-white shadow-sm; }

/* Form elements */
input, select, textarea {
  background-color: white;
  border: 1px solid #e2e8f0;
  color: #1a202c;
  border-radius: 0.375rem;
  padding: 0.5rem 0.75rem;
  font-size: 0.875rem;
  line-height: 1.25rem;
  width: 100%;
  transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
}

input:focus, select:focus, textarea:focus {
  outline: none;
  border-color: #4CAF50;
  box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
}

input::placeholder, textarea::placeholder {
  color: #94a3b8;
  opacity: 1;
}

/* Dark mode styles */
.dark body { 
  background-color: #0B0F19; 
  color: #E5E7EB; 
}

.dark .prose { 
  color: #CBD5E1; 
}

.dark .card { 
  background-color: #0f172a; 
  border-color: #1f2937; 
}

.dark .btn { 
  color: #0b0f19; 
}

.dark input,
.dark select,
.dark textarea {
  background-color: #1e293b;
  border-color: #334155;
  color: #f1f5f9;
}

.dark input:focus,
.dark select:focus,
.dark textarea:focus {
  border-color: #4CAF50;
  box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.2);
}

.dark input::placeholder,
.dark textarea::placeholder {
  color: #94a3b8;
}

/* Fix for select dropdown in dark mode */
.dark select option {
  background-color: #1e293b;
  color: #f1f5f9;
}

/* Fix for date/time inputs */
input[type="date"],
input[type="time"],
input[type="datetime-local"] {
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
}

.dark input[type="date"]:not(:focus),
.dark input[type="time"]:not(:focus),
.dark input[type="datetime-local"]:not(:focus) {
  color-scheme: dark;
}

/* Fix for number input spinners */
input[type="number"]::-webkit-inner-spin-button,
input[type="number"]::-webkit-outer-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

/* Fix for search input clear button */
input[type="search"]::-webkit-search-cancel-button {
  -webkit-appearance: none;
  height: 1em;
  width: 1em;
  border-radius: 50%;
  background: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23737373'><path d='M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z'/></svg>") no-repeat 50% 50%;
  background-size: contain;
  opacity: 0.6;
  cursor: pointer;
}

.dark input[type="search"]::-webkit-search-cancel-button {
  filter: invert(1);
  opacity: 0.8;
}
/* Remove unwanted white backgrounds in rich text areas on dark */
.dark .prose-no-bg *, .dark .prose-no-bg pre, .dark .prose-no-bg code, .dark .prose-no-bg blockquote, .dark .prose-no-bg table, .dark .prose-no-bg th, .dark .prose-no-bg td {
  background-color: transparent !important;
}
/* Force readable text colors inside injected HTML on dark mode */
.dark .prose-no-bg,
.dark .prose-no-bg :is(p, li, span, strong, em, blockquote, td, th, code, pre) {
  color: #E5E7EB !important;
}
.dark .prose-no-bg h1, .dark .prose-no-bg h2, .dark .prose-no-bg h3, .dark .prose-no-bg h4, .dark .prose-no-bg h5, .dark .prose-no-bg h6 {
  color: #F1F5F9 !important;
}
.dark .prose-no-bg a { color: #7AC943 !important; }

/* Link underline animation */
.link-underline { position: relative; display: inline-block; }
.link-underline::after {
  content: "";
  position: absolute;
  left: 0; bottom: -2px;
  height: 2px; width: 100%;
  background: currentColor;
  transform: scaleX(0);
  transform-origin: left;
  transition: transform .25s ease;
  opacity: .6;
}
.link-underline:hover::after { transform: scaleX(1); }

/* Card micro-interaction */
.card-hover { transition: transform .2s ease, box-shadow .2s ease; }
.card-hover:hover { transform: translateY(-2px); box-shadow: 0 10px 24px -8px rgba(0,0,0,.15); }

/* Marquee animation */
@keyframes marquee-left {
  0% { transform: translateX(0); }
  100% { transform: translateX(-50%); }
}
.marquee {
  overflow: hidden;
  position: relative;
}
.marquee-inner {
  display: flex;
  width: 200%;
  animation: marquee-left 20s linear infinite;
}

.marquee:hover .marquee-inner {
  animation-play-state: paused;
}
.spin-slow { animation: spin 8s linear infinite; }

@keyframes fade-slide-up {
  0% { opacity: 0; transform: translateY(10px); }
  100% { opacity: 1; transform: translateY(0); }
}
@keyframes fade-in {
  0% { opacity: 0; }
  100% { opacity: 1; }
}
@keyframes float-soft {
  0% { transform: translateY(0); }
  50% { transform: translateY(-4px); }
  100% { transform: translateY(0); }
}

/* Apply subtle page entry animation */
body { animation: fade-slide-up .45s ease-out; }

/* Helper classes for components */
.animate-page { animation: fade-slide-up .5s ease-out both; }
.animate-soft { animation: float-soft 6s ease-in-out infinite; }
.animate-fade { animation: fade-in .6s ease-out both; }

/* Respect reduced motion preferences */
@media (prefers-reduced-motion: reduce) {
  * { animation-duration: 0.001ms !important; animation-iteration-count: 1 !important; transition-duration: 0.001ms !important; }
  html { scroll-behavior: auto; }
}
